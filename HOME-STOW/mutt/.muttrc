# Caches for faster open
set header_cache="~/.config/mutt"

# Default account
source ~/.config/mutt/mbsync
set signature="~/.config/mutt/signature"

set editor='nvim'

auto_view text/html

# macro index,pager \cb "\
# :set my_tmp_pipe_decode=\$pipe_decode\n\
# :set pipe_decode\n\
# |urlscan\n\
# :set pipe_decode=\$my_tmp_pipe_decode\n\
# :unset my_tmp_pipe_decode\n" \
# 'call urlview to extract URLs out of a message'


macro index,pager \cb "\
|urlscan\n" \
'call urlview to extract URLs out of a message'

# Neomutt Configs
set text_flowed

# Sidebar Configs
#set sidebar_visible
set sidebar_visible
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set sidebar_short_path
set mail_check_stats
set mail_check_stats_interval = 10

# Move the highlight to the previous mailbox
bind index,pager \Cp sidebar-prev
# Move the highlight to the next mailbox
bind index,pager \Cn sidebar-next
# Open the highlighted mailbox
bind index,pager \Co sidebar-open

set mail_check_stats

set markers = no
set reply_with_xorig = yes

# GPG Config
set pgp_use_gpg_agent = yes
set pgp_auto_decode = yes
set pgp_sign_as = 23C003EA
set pgp_default_key = 23C003EA
set crypt_autosign = yes
set crypt_verify_sig = yes
set crypt_use_gpgme = yes
set pgp_self_encrypt = yes

auto_view text/x-vcard text/html text/enriched
auto_view text/calendar application/ics

# KHARD
set query_command= "ag '%s' ~/.config/mutt/aliases; khard email --parsable --search-in-source-files '%s'"
bind editor <Tab> complete-query
bind editor ^T    complete
macro index,pager A \
    "<pipe-message>khard add-email<return>" \
    "add the sender email address to khard"

macro index,pager G \
    "<shell-escape> mbsync -a" \
    "syncs imap maildir using mbsync"

# use notification
set new_mail_command="notify-send 'New Email' '%n new messages, %u unread.' &"

bind index,pager \` sidebar-toggle-visible

setenv PINENTRY_USER_DATA curses
# alias file
source ~/.config/mutt/aliases
set alias_file=~/.config/mutt/aliases
